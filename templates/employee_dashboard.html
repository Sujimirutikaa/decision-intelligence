{% extends "base.html" %}

{% block title %}Employee Dashboard{% endblock %}

{% block content %}
<div class="dashboard-container">
    <nav class="navbar">
        <div class="navbar-brand">
            Decision Intelligence
            <span class="role-badge employee">EMPLOYEE</span>
        </div>
        <div class="navbar-nav">
            <a href="{{ url_for('employee_dashboard') }}" class="nav-link">Dashboard</a>
            <a href="{{ url_for('employee_create_decision') }}" class="nav-link">Create Decision</a>
            <a href="{{ url_for('employee_decisions') }}" class="nav-link">My Decisions</a>
            <a href="{{ url_for('employee_alerts') }}" class="nav-link">Alerts</a>
            <a href="{{ url_for('logout') }}" class="logout-btn">Logout</a>
        </div>
    </nav>
    
    <div class="dashboard-header">
        <h1>Employee Dashboard</h1>
        <p>Welcome back, {{ current_user.username }}!</p>
    </div>
    
    <div class="stats-grid">
        <div class="stat-card employee">
            <div class="icon">üìÑ</div>
            <div class="number">{{ total }}</div>
            <div class="label">Total Decisions</div>
        </div>
        <div class="stat-card employee">
            <div class="icon">‚è∞</div>
            <div class="number">{{ pending }}</div>
            <div class="label">Pending Review</div>
        </div>
        <div class="stat-card employee">
            <div class="icon">üí∞</div>
            <div class="number">${{ "{:,.0f}".format(debt) }}</div>
            <div class="label">Decision Debt</div>
        </div>
        <div class="stat-card employee">
            <div class="icon">üîî</div>
            <div class="number">{{ alerts_count }}</div>
            <div class="label">Active Alerts</div>
        </div>
    </div>
    
    <div style="display: flex; gap: 15px; margin-bottom: 30px;">
        <a href="{{ url_for('employee_create_decision') }}" class="btn btn-employee">Create New Decision</a>
        <a href="{{ url_for('employee_decisions') }}" class="btn btn-secondary">View My Decisions</a>
    </div>
    
    <div class="content-card">
        <h2>Recent Alerts</h2>
        {% if recent_alerts %}
            {% for alert in recent_alerts %}
            <div class="alert-card {{ alert.alert_type|replace('_', '-') }}">
                <div style="display: flex; align-items: flex-start;">
                    <div class="alert-icon">
                        {% if alert.alert_type == 'high_risk' %}‚ö†Ô∏è
                        {% else %}‚è∞{% endif %}
                    </div>
                    <div class="alert-content">
                        <div class="alert-message">{{ alert.message }}</div>
                        <div class="alert-time">{{ alert.created_at.strftime('%Y-%m-%d %H:%M') }}</div>
                    </div>
                </div>
                <button class="alert-dismiss" onclick="dismissAlert({{ alert.id }})">√ó</button>
            </div>
            {% endfor %}
            <div style="margin-top: 20px;">
                <a href="{{ url_for('employee_alerts') }}" class="btn btn-secondary btn-sm">View All Alerts</a>
            </div>
        {% else %}
            <div style="text-align: center; padding: 40px 20px; color: #666;">
                <div style="font-size: 3rem; margin-bottom: 15px;">üîî</div>
                <p style="font-size: 1.1rem; color: #333; margin-bottom: 10px;">No alerts at this time</p>
                <p style="font-size: 0.9rem;">Create a high-risk decision (> $100,000) to generate an alert</p>
            </div>
        {% endif %}
    </div>
</div>
{% endblock %}